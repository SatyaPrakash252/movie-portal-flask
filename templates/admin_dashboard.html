{% extends "base.html" %}
{% block content %}
<div class="admin-panel glass-panel">
  <div class="admin-header d-flex justify-content-between align-items-center mb-3">
    <h3>Admin Dashboard</h3>
    <div>
      <a href="{{ url_for('add_movie') }}" class="glass-btn">Add Movie</a>
      <form method="post" action="{{ url_for('admin_import_tmdb') }}" style="display:inline;">
        <input type="hidden" name="limit" value="1000">
        <button class="glass-btn" type="submit">Import 1000 from TMDB</button>
      </form>
    </div>
  </div>
  <div class="admin-list">
    <table class="table table-borderless">
      <thead>
        <tr><th>Poster</th><th>Title</th><th>Year</th><th>Director</th><th>Actions</th></tr>
      </thead>
      <tbody>
        {% for m in movies %}
          <tr>
            <td><img src="{{ m.poster_url }}" style="height:60px"></td>
            <td>{{ m.title }}</td>
            <td>{{ m.year }}</td>
            <td>{{ m.director }}</td>
            <td>
              <a class="glass-btn" href="{{ url_for('edit_movie', id=m.id) }}">Edit</a>
              <form method="POST" action="{{ url_for('delete_movie', id=m.id) }}" style="display:inline;">
                <button class="glass-btn" type="submit">Delete</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
